/**
 * State-based routing for Angular
 * @version v1.1.0
 * @link https://ui-router.github.io/angular
 * @license MIT License, http://www.opensource.org/licenses/MIT
 */
!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@uirouter/core"),require("@angular/core"),require("rxjs/ReplaySubject"),require("rxjs/BehaviorSubject"),require("rxjs/observable/of"),require("rxjs/observable/fromPromise"),require("rxjs/observable/combineLatest"),require("rxjs/operator/switchMap"),require("rxjs/operator/map"),require("rxjs/operator/concat"),require("@angular/common"),require("@angular/router"),require("@uirouter/rx")):"function"==typeof define&&define.amd?define(["exports","@uirouter/core","@angular/core","rxjs/ReplaySubject","rxjs/BehaviorSubject","rxjs/observable/of","rxjs/observable/fromPromise","rxjs/observable/combineLatest","rxjs/operator/switchMap","rxjs/operator/map","rxjs/operator/concat","@angular/common","@angular/router","@uirouter/rx"],t):t(e["@uirouter/angular"]={},e["@uirouter/core"],e.ng.core,e.Rx,e.Rx,e.Rx.Observable,e.Rx.Observable,e.Rx.Observable,e.Rx.Observable.prototype,e.Rx.Observable.prototype,e.Rx.Observable.prototype,e.ng.common,e.ng.router,e["@uirouter/rx"])}(this,function(e,t,r,n,i,o,a,s,u,c,p,f,l,h){"use strict";function d(e){var r={},n=e.views||{$default:t.pick(e,["component","bindings"])};return t.forEach(n,function(n,i){if(i=i||"$default",t.isFunction(n)&&(n={component:n}),0!==Object.keys(n).length){n.$type="ng2",n.$context=e,n.$name=i;var o=t.ViewService.normalizeUIViewTarget(n.$context,n.$name);n.$uiViewName=o.uiViewName,n.$uiViewContextAnchor=o.uiViewContextAnchor,r[i]=n}}),r}var g=0,v=function(){function e(e,t){this.path=e,this.viewDecl=t,this.$id=g++,this.loaded=!0}return e.prototype.load=function(){return t.services.$q.when(this)},e}(),_=function(){function e(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(e.length<2)throw new Error("pass at least two injectors");this.injectors=e}return e.prototype.get=function(t,r){for(var n=0;n<this.injectors.length;n++){var i=this.injectors[n].get(t,e.NOT_FOUND);if(i!==e.NOT_FOUND)return i}if(arguments.length>=2)return r;this.injectors[0].get(t)},e.NOT_FOUND={},e}(),m=0,y=function(){function e(e,t,r){this.router=e,this.viewContainerRef=r,this._uiViewData={},this._parent=t}return Object.defineProperty(e.prototype,"_name",{set:function(e){this.name=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"state",{get:function(){return t.parse("_uiViewData.config.viewDecl.$context.self")(this)},enumerable:!0,configurable:!0}),e.prototype.ngOnInit=function(){var e=this,t=this.router,r=this._parent.fqn,n=this.name||"$default";this._uiViewData={$type:"ng2",id:m++,name:n,fqn:r?r+"."+n:n,creationContext:this._parent.context,configUpdated:this._viewConfigUpdated.bind(this),config:void 0},this._deregisterUiCanExitHook=t.transitionService.onBefore({},function(t){return e._invokeUiCanExitHook(t)}),this._deregisterUiOnParamsChangedHook=t.transitionService.onSuccess({},function(t){return e._invokeUiOnParamsChangedHook(t)}),this._deregisterUIView=t.viewService.registerUIView(this._uiViewData)},e.prototype._invokeUiCanExitHook=function(e){var r=this._componentRef&&this._componentRef.instance,n=r&&r.uiCanExit;if(t.isFunction(n)){var i=this.state;-1!==e.exiting().indexOf(i)&&e.onStart({},function(){return n.call(r,e)})}},e.prototype._invokeUiOnParamsChangedHook=function(e){var r=this._componentRef&&this._componentRef.instance,n=r&&r.uiOnParamsChanged;if(t.isFunction(n)){var i=this.state;if(e===new t.ResolveContext(this._uiViewData.config.path).getResolvable("$transition$").data||-1!==e.exiting().indexOf(i))return;var o=e.params("to"),a=e.params("from"),s=function(e){return e.paramSchema},u=e.treeChanges("to").map(s).reduce(t.unnestR,[]),c=e.treeChanges("from").map(s).reduce(t.unnestR,[]),p=u.filter(function(e){var t=c.indexOf(e);return-1===t||!c[t].type.equals(o[e.id],a[e.id])});if(p.length){var f=p.map(function(e){return e.id}),l=t.filter(o,function(e,t){return-1!==f.indexOf(t)});r.uiOnParamsChanged(l,e)}}},e.prototype._disposeLast=function(){this._componentRef&&this._componentRef.destroy(),this._componentRef=null},e.prototype.ngOnDestroy=function(){this._deregisterUIView&&this._deregisterUIView(),this._deregisterUiCanExitHook&&this._deregisterUiCanExitHook(),this._deregisterUiOnParamsChangedHook&&this._deregisterUiOnParamsChangedHook(),this._deregisterUIView=this._deregisterUiCanExitHook=this._deregisterUiOnParamsChangedHook=null,this._disposeLast()},e.prototype._viewConfigUpdated=function(e){if(!e)return this._disposeLast();e instanceof v&&this._uiViewData.config!==e&&(this._disposeLast(),t.trace.traceUIViewConfigUpdated(this._uiViewData,e&&e.viewDecl.$context),this._applyUpdatedConfig(e),this._componentRef.changeDetectorRef.markForCheck())},e.prototype._applyUpdatedConfig=function(e){this._uiViewData.config=e;var n=new t.ResolveContext(e.path),i=this._getComponentInjector(n),o=e.viewDecl.component,a=i.get(r.ComponentFactoryResolver).resolveComponentFactory(o);this._componentRef=this._componentTarget.createComponent(a,void 0,i),this._applyInputBindings(a,this._componentRef.instance,n,o)},e.prototype._getComponentInjector=function(n){var i=n.getTokens().map(function(e){return n.getResolvable(e)}).filter(function(e){return e.resolved}).map(function(e){return{provide:e.token,useValue:n.injector().get(e.token)}}),o={context:this._uiViewData.config.viewDecl.$context,fqn:this._uiViewData.fqn};i.push({provide:e.PARENT_INJECT,useValue:o});var a=this.viewContainerRef.injector,s=n.getResolvable(t.NATIVE_INJECTOR_TOKEN).data,u=new _(s,a);return r.ReflectiveInjector.resolveAndCreate(i,u)},e.prototype._applyInputBindings=function(e,r,n,i){var o=this._uiViewData.config.viewDecl.bindings||{},a=Object.keys(o),s=a.reduce(function(t,r){return t.concat([{prop:(n=r,i=e.inputs.find(function(e){return e.templateName===n}),i&&i.propName||n),token:o[r]}]);var n,i},[]),u=function(e){return e.inputs.map(function(e){return{prop:e.propName,token:e.templateName}})}(e).filter(function(e){return!t.inArray(a,e.prop)}),c=n.injector();s.concat(u).map(function(e){return{prop:e.prop,resolvable:n.getResolvable(e.token)}}).filter(function(e){return e.resolvable&&e.resolvable.resolved}).forEach(function(e){r[e.prop]=c.get(e.resolvable.token)})},e.PARENT_INJECT="UIView.PARENT_INJECT",e.decorators=[{type:r.Component,args:[{selector:"ui-view, [ui-view]",exportAs:"uiView",template:'\n    <ng-template #componentTarget></ng-template>\n    <ng-content *ngIf="!_componentRef"></ng-content>\n  '}]}],e.ctorParameters=function(){return[{type:t.UIRouter},{type:void 0,decorators:[{type:r.Inject,args:[e.PARENT_INJECT]}]},{type:r.ViewContainerRef}]},e.propDecorators={_componentTarget:[{type:r.ViewChild,args:["componentTarget",{read:r.ViewContainerRef}]}],name:[{type:r.Input,args:["name"]}],_name:[{type:r.Input,args:["ui-view"]}]},e}();function R(e,r,n){return void 0===n&&(n={}),t.isFunction(n.config)&&n.config(e,r,n),(n.states||[]).map(function(t){return e.stateRegistry.register(t)})}function S(e,r,n){t.isDefined(n.deferIntercept)&&e.urlService.deferIntercept(n.deferIntercept),t.isDefined(n.otherwise)&&e.urlService.rules.otherwise(n.otherwise),t.isDefined(n.initial)&&e.urlService.rules.initial(n.initial)}var b=function(){function e(e,t){this._el=e,this._renderer=t}return e.prototype.openInNewTab=function(){return"_blank"===this._el.nativeElement.target},e.prototype.update=function(e){e&&""!==e?this._renderer.setProperty(this._el.nativeElement,"href",e):this._renderer.removeAttribute(this._el.nativeElement,"href")},e.decorators=[{type:r.Directive,args:[{selector:"a[uiSref]"}]}],e.ctorParameters=function(){return[{type:r.ElementRef},{type:r.Renderer2}]},e}(),I=function(){function e(e,t,r){var i=this;this.targetState$=new n.ReplaySubject(1),this._emit=!1,this._router=e,this._anchorUISref=t,this._parent=r,this._statesSub=e.globals.states$.subscribe(function(){return i.update()})}return Object.defineProperty(e.prototype,"uiSref",{set:function(e){this.state=e,this.update()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"uiParams",{set:function(e){this.params=e,this.update()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"uiOptions",{set:function(e){this.options=e,this.update()},enumerable:!0,configurable:!0}),e.prototype.ngOnInit=function(){this._emit=!0,this.update()},e.prototype.ngOnChanges=function(e){this.update()},e.prototype.ngOnDestroy=function(){this._emit=!1,this._statesSub.unsubscribe(),this.targetState$.unsubscribe()},e.prototype.update=function(){var e=this._router.stateService;if(this._emit){var t=e.target(this.state,this.params,this.getOptions());this.targetState$.next(t)}if(this._anchorUISref){var r=e.href(this.state,this.params,this.getOptions());this._anchorUISref.update(r)}},e.prototype.getOptions=function(){var e={relative:this._parent&&this._parent.context&&this._parent.context.name,inherit:!0,source:"sref"};return t.extend(e,this.options||{})},e.prototype.go=function(e,r,n){if(!(this._anchorUISref&&(this._anchorUISref.openInNewTab()||e||!t.isNumber(e)||r||n)||!this.state))return this._router.stateService.go(this.state,this.params,this.getOptions()),!1},e.decorators=[{type:r.Directive,args:[{selector:"[uiSref]",exportAs:"uiSref"}]}],e.ctorParameters=function(){return[{type:t.UIRouter},{type:b,decorators:[{type:r.Optional}]},{type:void 0,decorators:[{type:r.Inject,args:[y.PARENT_INJECT]}]}]},e.propDecorators={state:[{type:r.Input,args:["uiSref"]}],params:[{type:r.Input,args:["uiParams"]}],options:[{type:r.Input,args:["uiOptions"]}],go:[{type:r.HostListener,args:["click",["$event.button","$event.ctrlKey","$event.metaKey"]]}]},e}(),E={active:!1,exact:!1,entering:!1,exiting:!1,targetStates:[]},U=function(e){if(!e.exists())return function(){return!1};var r=e.$state(),n=e.params(),i=t.PathUtils.buildPath(e).map(function(e){return e.paramSchema}).reduce(t.unnestR,[]).filter(function(e){return n.hasOwnProperty(e.id)});return function(e){var o=t.tail(e);if(!o||o.state!==r)return!1;var a=t.PathUtils.paramValues(e);return t.Param.equals(i,a,n)}};function w(e,r){return r.map(function(n){return e.concat(t.PathUtils.subPath(r,function(e){return e.state===n.state}))})}function O(e,t){return{active:e.active||t.active,exact:e.exact||t.exact,entering:e.entering||t.entering,exiting:e.exiting||t.exiting,targetStates:e.targetStates.concat(t.targetStates)}}var C=function(){function e(e){this.uiSrefStatus=new r.EventEmitter(!1),this._globals=e,this.status=Object.assign({},E)}return e.prototype.ngAfterContentInit=function(){var e=this,r=u.switchMap.call(this._globals.start$,function(e){var t=function(t){return{evt:t,trans:e}},r=o.of(t("start")),n=e.promise.then(function(){return t("success")},function(){return t("error")}),i=a.fromPromise(n);return p.concat.call(r,i)});this._srefs$=new i.BehaviorSubject(this._srefs.toArray()),this._srefChangesSub=this._srefs.changes.subscribe(function(t){return e._srefs$.next(t)});var n=u.switchMap.call(this._srefs$,function(e){return s.combineLatest(e.map(function(e){return e.targetState$}))});this._subscription=u.switchMap.call(r,function(e){return c.map.call(n,function(r){return r.map(function(r){return n=e,o=U(i=r),a=n.trans.treeChanges(),s="start"===n.evt,{active:w([],u="success"===n.evt?a.to:a.from).map(o).reduce(t.anyTrueR,!1),exact:o(u),entering:!!s&&w(a.retained,a.entering).map(o).reduce(t.anyTrueR,!1),exiting:!!s&&w(a.retained,a.exiting).map(o).reduce(t.anyTrueR,!1),targetStates:[i]};var n,i,o,a,s,u}).reduce(O)})}).subscribe(this._setStatus.bind(this))},e.prototype.ngOnDestroy=function(){this._subscription&&this._subscription.unsubscribe(),this._srefChangesSub&&this._srefChangesSub.unsubscribe(),this._srefs$&&this._srefs$.unsubscribe(),this._subscription=this._srefChangesSub=this._srefs$=void 0},e.prototype._setStatus=function(e){this.status=e,this.uiSrefStatus.emit(e)},e.decorators=[{type:r.Directive,args:[{selector:"[uiSrefStatus],[uiSrefActive],[uiSrefActiveEq]",exportAs:"uiSrefStatus"}]}],e.ctorParameters=function(){return[{type:t.UIRouterGlobals}]},e.propDecorators={uiSrefStatus:[{type:r.Output,args:["uiSrefStatus"]}],_srefs:[{type:r.ContentChildren,args:[I,{descendants:!0}]}]},e}(),x=function(){function e(e,t,r){var n=this;this._classes=[],this._classesEq=[],this._subscription=e.uiSrefStatus.subscribe(function(e){n._classes.forEach(function(n){return t.setElementClass(r.nativeElement,n,e.active)}),n._classesEq.forEach(function(n){return t.setElementClass(r.nativeElement,n,e.exact)})})}return Object.defineProperty(e.prototype,"active",{set:function(e){this._classes=e.split(/\s+/)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"activeEq",{set:function(e){this._classesEq=e.split(/\s+/)},enumerable:!0,configurable:!0}),e.prototype.ngOnDestroy=function(){this._subscription.unsubscribe()},e.decorators=[{type:r.Directive,args:[{selector:"[uiSrefActive],[uiSrefActiveEq]"}]}],e.ctorParameters=function(){return[{type:C},{type:r.Renderer},{type:r.ElementRef,decorators:[{type:r.Host}]}]},e.propDecorators={active:[{type:r.Input,args:["uiSrefActive"]}],activeEq:[{type:r.Input,args:["uiSrefActiveEq"]}]},e}(),T=[I,b,y,x,C],P=T,N=new r.InjectionToken("UIRouter Root Module"),j=new r.InjectionToken("UIRouter Module"),V=new r.InjectionToken("UIRouter States");function D(e,t){var r=t[0];return r&&r.deferInitialRender?function(){return new Promise(function(t){e.onStart({},function(e){e.promise.then(t,t)},{invokeLimit:1})})}:function(){return Promise.resolve()}}function A(e){return[{provide:N,useValue:e,multi:!0},{provide:j,useValue:e,multi:!0},{provide:l.ROUTES,useValue:e.states||[],multi:!0},{provide:r.ANALYZE_FOR_ENTRY_COMPONENTS,useValue:e.states||[],multi:!0},{provide:r.APP_INITIALIZER,useFactory:D,deps:[t.TransitionService,N],multi:!0}]}function $(e){return[{provide:j,useValue:e,multi:!0},{provide:l.ROUTES,useValue:e.states||[],multi:!0},{provide:r.ANALYZE_FOR_ENTRY_COMPONENTS,useValue:e.states||[],multi:!0}]}function k(e){return{provide:f.LocationStrategy,useClass:e?f.HashLocationStrategy:f.PathLocationStrategy}}var F=function(){function e(){}return e.forRoot=function(t){return void 0===t&&(t={}),{ngModule:e,providers:[W,se,k(t.useHash)].concat(A(t))}},e.forChild=function(t){return void 0===t&&(t={}),{ngModule:e,providers:$(t)}},e.decorators=[{type:r.NgModule,args:[{imports:[f.CommonModule],declarations:[T],exports:[T],entryComponents:[y]}]}],e.ctorParameters=function(){return[]},e}();function M(e){return function(r,n){var i=r.injector().get(t.NATIVE_INJECTOR_TOKEN);return q(e,i).then(function(e){return e.create(i)}).then(function(e){return L(r,e,i,n)})}}function q(e,n){if(t.isString(e))return n.get(r.NgModuleFactoryLoader).load(e);var i=n.get(r.Compiler),o=i instanceof r.Compiler,a=Promise.resolve(e()).then(function(e){return e&&e.__esModule&&e.default?e.default:e});return o?a:a.then(function(e){return i.compileModuleAsync(e)})}function L(e,r,n,i){var o=r.injector,a=o.get(t.UIRouter),s=a.stateRegistry,u=i.name,c=s.get(u),p=/^(.*)\.\*\*$/.exec(u),f=p&&p[1],l=H(n,o,N).reduce(t.uniqR,[]),h=H(n,o,j).reduce(t.uniqR,[]);if(l.length)throw console.log(l),new Error("Lazy loaded modules should not contain a UIRouterModule.forRoot() module");var d=h.map(function(e){return R(a,o,e)}).reduce(t.unnestR,[]).reduce(t.uniqR,[]);if(p){var g=s.get(f);if(!g||g===c)throw new Error("The Future State named '"+u+"' lazy loaded an NgModule. The lazy loaded NgModule must have a state named '"+f+"' which replaces the (placeholder) '"+u+"' Future State. Add a '"+f+"' state to the lazy loaded NgModule using UIRouterModule.forChild({ states: CHILD_STATES }).")}return d.filter(function(e){return!t.inArray(d,e.parent)}).forEach(function(e){return e.resolvables.push(t.Resolvable.fromData(t.NATIVE_INJECTOR_TOKEN,o))}),{}}function H(e,t,r){var n=t.get(r,[]),i=e.get(r,[]);return n.filter(function(e){return-1===i.indexOf(e)})}function B(e,t){var r=e.loadChildren;return r?M(r):e.lazyLoad}var J=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};function z(e,t){function r(){this.constructor=e}J(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}var K=function(e){function r(t,r,n){var i=e.call(this,t,n)||this;return i._locationStrategy=r,i._locationStrategy.onPopState(function(e){"hashchange"!==e.type&&i._listener(e)}),i}return z(r,e),r.prototype._get=function(){return this._locationStrategy.path(!0).replace(this._locationStrategy.getBaseHref().replace(/\/$/,""),"")},r.prototype._set=function(e,r,n,i){var o=t.parseUrl(n),a=o.path,s=o.search,u=o.hash,c=a+(u?"#"+u:"");i?this._locationStrategy.replaceState(e,r,c,s):this._locationStrategy.pushState(e,r,c,s)},r.prototype.dispose=function(t){e.prototype.dispose.call(this,t)},r}(t.BaseLocationServices),Y=function(e){function r(r,n){var i=e.call(this,r,t.is(f.PathLocationStrategy)(n))||this;return i._locationStrategy=n,i}return z(r,e),r.prototype.baseHref=function(e){return this._locationStrategy.getBaseHref()},r}(t.BrowserLocationConfig);function Z(e,n,i,o){if(1!==n.length)throw new Error("Exactly one UIRouterModule.forRoot() should be in the bootstrapped app module's imports: []");var a=new t.UIRouter;a.plugin(h.UIRouterRx),a.plugin(t.servicesPlugin),t.services.$injector.get=o.get.bind(o),a.locationService=new K(a,e,f.isPlatformBrowser(o.get(r.PLATFORM_ID))),a.locationConfig=new Y(a,e);a.viewService._pluginapi._viewConfigFactory("ng2",function(e,t){return new v(e,t)});var s=a.stateRegistry;s.decorator("views",d),s.decorator("lazyLoad",B);var u=t.Resolvable.fromData(t.NATIVE_INJECTOR_TOKEN,o);return s.root().resolvables.push(u),a.urlMatcherFactory.$get(),n.forEach(function(e){return S(a,0,e)}),i.forEach(function(e){return R(a,o,e)}),a}function G(e){return function(){e.urlRouter.interceptDeferred||(e.urlService.listen(),e.urlService.sync())}}function Q(e){return{fqn:null,context:e.root()}}var W=[{provide:t.UIRouter,useFactory:Z,deps:[f.LocationStrategy,N,j,r.Injector]},{provide:y.PARENT_INJECT,useFactory:Q,deps:[t.StateRegistry]},{provide:r.APP_INITIALIZER,useFactory:G,deps:[t.UIRouter],multi:!0}];function X(e){return e.stateService}function ee(e){return e.transitionService}function te(e){return e.urlMatcherFactory}function re(e){return e.urlRouter}function ne(e){return e.urlService}function ie(e){return e.viewService}function oe(e){return e.stateRegistry}function ae(e){return e.globals}var se=[{provide:t.StateService,useFactory:X,deps:[t.UIRouter]},{provide:t.TransitionService,useFactory:ee,deps:[t.UIRouter]},{provide:t.UrlMatcherFactory,useFactory:te,deps:[t.UIRouter]},{provide:t.UrlRouter,useFactory:re,deps:[t.UIRouter]},{provide:t.UrlService,useFactory:ne,deps:[t.UIRouter]},{provide:t.ViewService,useFactory:ie,deps:[t.UIRouter]},{provide:t.StateRegistry,useFactory:oe,deps:[t.UIRouter]},{provide:t.UIRouterGlobals,useFactory:ae,deps:[t.UIRouter]}],ue=W.concat(se);Object.keys(t).forEach(function(r){e[r]=t[r]}),e.uiRouterFactory=Z,e.appInitializer=G,e.parentUIViewInjectFactory=Q,e._UIROUTER_INSTANCE_PROVIDERS=W,e.fnStateService=X,e.fnTransitionService=ee,e.fnUrlMatcherFactory=te,e.fnUrlRouter=re,e.fnUrlService=ne,e.fnViewService=ie,e.fnStateRegistry=oe,e.fnGlobals=ae,e._UIROUTER_SERVICE_PROVIDERS=se,e.UIROUTER_PROVIDERS=ue,e.UIROUTER_ROOT_MODULE=N,e.UIROUTER_MODULE_TOKEN=j,e.UIROUTER_STATES=V,e.onTransitionReady=D,e.makeRootProviders=A,e.makeChildProviders=$,e.locationStrategy=k,e.UIRouterModule=F,e.applyModuleConfig=R,e.applyRootModuleConfig=S,e._UIROUTER_DIRECTIVES=T,e.UIROUTER_DIRECTIVES=P,e.UIView=y,e.AnchorUISref=b,e.UISref=I,e.UISrefStatus=C,e.UISrefActive=x,e.ng2ViewsBuilder=d,e.Ng2ViewConfig=v,e.ng2LazyLoadBuilder=B,e.loadNgModule=M,e.loadModuleFactory=q,e.applyNgModule=L,e.multiProviderParentChildDelta=H,Object.defineProperty(e,"__esModule",{value:!0})});
//# sourceMappingURL=ui-router-ng2.min.js.map
